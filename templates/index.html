{#<!DOCTYPE html>#}
{#<html lang="en">#}
{#<head>#}
{#  <meta charset="UTF-8">#}
{#  <meta name="viewport" content="width=device-width, initial-scale=1.0">#}
{#  <title>Video Uploader</title>#}
{#  <!-- Add Bootstrap CSS -->#}
{#  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmSmObMk2vbc6JAeHf7at3R888bWaQB25kuY1befq4jTmUSdrvVnKz8T+0wD2Fek" crossorigin="anonymous">#}
{#  <!-- Add custom CSS -->#}
{#  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">#}
{#</head>#}
{#<body>#}
{#  <div class="container mt-5">#}
{#    <h2>Upload Video</h2>#}
{#    <form action="/upload" method="post" enctype="multipart/form-data">#}
{#      <!-- Add input fields with Bootstrap classes -->#}
{#      <input type="file" name="video" accept=".mp4, .mkv, .avi, .mov" class="form-control">#}
{#      <button type="submit" class="btn btn-primary">Upload</button>#}
{#    </form>#}
{#  </div>#}
{##}
{#  <!-- Display uploaded video links -->#}
{#  {% if videos %}#}
{#    <h3>Uploaded Videos:</h3>#}
{#    <ul>#}
{#      {% for file in videos %}#}
{#        <li><a href="{{ url_for('send_video', filename=file) }}">{{ file }}</a></li>#}
{#      {% endfor %}#}
{#    </ul>#}
{#  {% endif %}#}
{##}
{#</body>#}
{#</html>#}
{##}
{#{% block scripts %}#}
{#  <!-- Add Bootstrap JavaScript -->#}
{#  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhj9o.0ybNvztBNxBt2VYNuDV63adZwo" crossorigin="anonymous"></script>#}
{#  <script src="{{ url_for('static', filename='js/script.js') }}"></script>#}
{#{% endblock %}#}


{#<!DOCTYPE html>#}
{#<html lang="en">#}
{#<head>#}
{#    <meta charset="UTF-8">#}
{#    <meta name="viewport" content="width=device-width, initial-scale=1.0">#}
{#    <title>Video Frame Search</title>#}
{#    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>#}
{#    <style>#}
{#        body {#}
{#            font-family: Arial, sans-serif;#}
{#            max-width: 800px;#}
{#            margin: 0 auto;#}
{#            padding: 20px;#}
{#        }#}
{##}
{#        h1 {#}
{#            text-align: center;#}
{#        }#}
{##}
{#        form {#}
{#            margin-bottom: 20px;#}
{#        }#}
{##}
{#        input[type="file"], input[type="text"] {#}
{#            width: 100%;#}
{#            padding: 10px;#}
{#            margin-bottom: 10px;#}
{#        }#}
{##}
{#        button {#}
{#            background-color: #4CAF50;#}
{#            color: white;#}
{#            padding: 10px 20px;#}
{#            border: none;#}
{#            cursor: pointer;#}
{#        }#}
{##}
{#        button:hover {#}
{#            background-color: #45a049;#}
{#        }#}
{##}
{#        #results {#}
{#            display: flex;#}
{#            flex-wrap: wrap;#}
{#            justify-content: space-around;#}
{#        }#}
{##}
{#        .result-item {#}
{#            margin: 10px;#}
{#            text-align: center;#}
{#        }#}
{##}
{#        .result-item img {#}
{#            max-width: 200px;#}
{#            max-height: 200px;#}
{#        }#}
{#    </style>#}
{#</head>#}
{#<body>#}
{#<h1>Video Frame Search</h1>#}
{#<form id="upload-form" enctype="multipart/form-data">#}
{#    <input type="file" name="video" accept="video/*" required>#}
{#    <button type="submit">Upload Video</button>#}
{#</form>#}
{#<form id="search-form">#}
{#    <input type="text" name="query" placeholder="Enter search query" required>#}
{#    <button type="submit">Search</button>#}
{#</form>#}
{#<div id="results"></div>#}
{##}
{#<script>#}
{#    $(document).ready(function () {#}
{#        $('#upload-form').submit(function (e) {#}
{#            e.preventDefault();#}
{#            var formData = new FormData(this);#}
{#            $.ajax({#}
{#                url: '/upload',#}
{#                type: 'POST',#}
{#                data: formData,#}
{#                contentType: false,#}
{#                processData: false,#}
{#                success: function (response) {#}
{#                    alert(response);#}
{#                },#}
{#                error: function () {#}
{#                    alert('Error uploading video');#}
{#                }#}
{#            });#}
{#        });#}
{##}
{#        $('#search-form').submit(function (e) {#}
{#            e.preventDefault();#}
{#            var query = $('input[name="query"]').val();#}
{#            $.ajax({#}
{#                url: '/search',#}
{#                type: 'POST',#}
{#                data: {query: query},#}
{#                success: function (response) {#}
{#                    displayResults(response);#}
{#                },#}
{#                error: function () {#}
{#                    alert('Error performing search');#}
{#                }#}
{#            });#}
{#        });#}
{##}
{#        function displayResults(results) {#}
{#            var resultsDiv = $('#results');#}
{#            resultsDiv.empty();#}
{#            results.forEach(function (result) {#}
{#                var resultItem = $('<div class="result-item"></div>');#}
{#                resultItem.append('<img src="' + result.path + '" alt="Search Result">');#}
{#                resultItem.append('<p>Score: ' + result.score.toFixed(4) + '</p>');#}
{#                resultItem.append('<p>Timestamp: ' + result.timestamp + '</p>');#}
{#                resultsDiv.append(resultItem);#}
{#            });#}
{#        }#}
{#    });#}
{#</script>#}
{#</body>#}
{#</html>#}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Frame Search</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        form {
            margin-bottom: 20px;
        }
        input[type="file"], input[type="text"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        #results {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
        }
        .result-item {
            margin: 10px;
            text-align: center;
        }
        .result-item img {
            max-width: 200px;
            max-height: 200px;
        }
    </style>
</head>
<body>
    <h1>Video Frame Search</h1>
    <form id="upload-form" enctype="multipart/form-data">
        <input type="file" name="video" accept="video/*" required>
        <button type="submit">Upload Video</button>
    </form>
    <form id="search-form">
        <input type="text" name="query" placeholder="Enter search query" required>
        <button type="submit">Search</button>
    </form>
    <div id="results"></div>

    <script>
        $(document).ready(function() {
            $('#upload-form').submit(function(e) {
                e.preventDefault();
                var formData = new FormData(this);
                $.ajax({
                    url: '/upload',
                    type: 'POST',
                    data: formData,
                    contentType: false,
                    processData: false,
                    success: function(response) {
                        alert(response);
                    },
                    error: function() {
                        alert('Error uploading video');
                    }
                });
            });

            $('#search-form').submit(function(e) {
                e.preventDefault();
                var query = $('input[name="query"]').val();
                $.ajax({
                    url: '/search',
                    type: 'POST',
                    data: {query: query},
                    success: function(response) {
                        displayResults(response);
                    },
                    error: function() {
                        alert('Error performing search');
                    }
                });
            });

            function displayResults(results) {
                var resultsDiv = $('#results');
                resultsDiv.empty();
                results.forEach(function(result) {
                    var resultItem = $('<div class="result-item"></div>');
                    resultItem.append('<img src="' + result.path + '" alt="Search Result">');
                    resultItem.append('<p>Score: ' + result.score.toFixed(4) + '</p>');
                    resultItem.append('<p>Timestamp: ' + result.timestamp + '</p>');
                    resultsDiv.append(resultItem);
                });
            }
        });
    </script>
</body>
</html>